{"id":"eb78b8a7-8fe6-47e5-8698-e18c89e7c249","revision":0,"last_node_id":238,"last_link_id":376,"nodes":[{"id":68,"type":"CreateVideo","pos":[1370,50],"size":[270,78],"flags":{"collapsed":false},"order":36,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":139},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":324},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":357}],"outputs":[{"localized_name":"VIDEO","name":"VIDEO","type":"VIDEO","links":[129]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"CreateVideo","widget_ue_connectable":{}},"widgets_values":[16]},{"id":103,"type":"Note","pos":[150,40],"size":[410,90],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["Since umt5 is a variant based on T5, the input of prompt supports multiple languages.\n---\n由于 umt5 是基于 T5 的变体，所以提示词输入是支持多种语言输入的"],"color":"#432","bgcolor":"#653"},{"id":152,"type":"VAELoader","pos":[-269.6354675292969,-169.84799194335938],"size":[350,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[260,261]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"VAELoader","models":[{"name":"wan_2.1_vae.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors","directory":"vae"}],"widget_ue_connectable":{}},"widgets_values":["wan_2.1_vae.safetensors"],"color":"#322","bgcolor":"#533"},{"id":154,"type":"MarkdownNote","pos":[1003.8118286132812,610.20068359375],"size":[303.90106201171875,158.5415802001953],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"KSampler Setting","properties":{"widget_ue_connectable":{}},"widgets_values":["## Default\n\n- steps:20\n- cfg:4.0\n\n## [For CausVid LoRA](https://www.reddit.com/r/StableDiffusion/comments/1knuafk/causvid_lora_massive_speedup_for_wan21_made_by/)\n\n- steps: 2-4\n- cfg: 1.0\n\n"],"color":"#432","bgcolor":"#653"},{"id":149,"type":"MarkdownNote","pos":[-722.4058227539062,-976.9545288085938],"size":[420,150],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"About CausVid LoRA","properties":{"widget_ue_connectable":{}},"widgets_values":["You may need to test different LoRA strength to get the best results. Test within the range of 0.3 to 1. \nWhen we were testing the workflow, we found that sometimes there are relatively obvious artifacts when the intensity is around 0.5. The effect is sometimes quite good when it's above 0.7. When the value is too high, it will be overly saturated.  \n\n---\n\n\n你可能需要测试不同的 LoRA 强度来获取最好的结果，0.3～1 之间进行测试，我们在测试工作流时发现，有时候 0.5 左右会有比较明显的伪影，0.7 后效果有时还不错，但数值过高时会过于饱和。\n"],"color":"#432","bgcolor":"#653"},{"id":153,"type":"MarkdownNote","pos":[-1279.157470703125,1322.929931640625],"size":[210,98.17037963867188],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"About Video Size","properties":{"widget_ue_connectable":{}},"widgets_values":["| Model                                                         | 480P | 720P |\n| ------------------------------------------------------------ | ---- | ---- |\n| [VACE-1.4B](https://huggingface.co/Wan-AI/Wan2.1-VACE-14B)   | ✅   | ✅   |"],"color":"#432","bgcolor":"#653"},{"id":151,"type":"UNETLoader","pos":[-264.5620422363281,-1121.8436279296875],"size":[350,82],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[320]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"UNETLoader","models":[{"name":"wan2.1_vace_14B_fp16.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/diffusion_models/wan2.1_vace_14B_fp16.safetensors","directory":"diffusion_models"}],"widget_ue_connectable":{}},"widgets_values":["wan2.1_vace_14B_fp16.safetensors","default"],"color":"#322","bgcolor":"#533"},{"id":161,"type":"CLIPLoader","pos":[-266.32666015625,-318.1207275390625],"size":[350,106],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"clip_name","name":"clip_name","type":"COMBO","widget":{"name":"clip_name"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[321]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"CLIPLoader","models":[{"name":"umt5_xxl_fp16.safetensors","url":"https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp16.safetensors","directory":"text_encoders"}],"widget_ue_connectable":{}},"widgets_values":["umt5_xxl_fp16.safetensors","wan","default"],"color":"#322","bgcolor":"#533"},{"id":137,"type":"PrimitiveInt","pos":[100,1120],"size":[210,82],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[215]}],"title":"Width","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveInt","widget_ue_connectable":{}},"widgets_values":[1280,"fixed"],"color":"#322","bgcolor":"#533"},{"id":139,"type":"PrimitiveInt","pos":[100,1260],"size":[210,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[217]}],"title":"Height","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveInt","widget_ue_connectable":{}},"widgets_values":[720,"fixed"],"color":"#322","bgcolor":"#533"},{"id":7,"type":"CLIPTextEncode","pos":[150,390],"size":[425.27801513671875,180.6060791015625],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":360},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[97]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":["bad quality, blurry, messy, chaotic, (watermark:3), (text:3), (subtitle:3), score_6, score_5, score_4, censored, deformed, bad hand,  deformed face, low quality, bad quality, worst quality, (drawn, furry, illustration, cartoon, anime, comic:1.5), 3d, cgi, extra fingers, (source_anime, source_cartoon, source_furry, source_western, source_comic, source_pony), deformed teeth"],"color":"#223","bgcolor":"#335"},{"id":8,"type":"VAEDecode","pos":[729.0414428710938,742.5310668945312],"size":[315,46],"flags":{"collapsed":true},"order":35,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":117},{"localized_name":"vae","name":"vae","type":"VAE","link":261}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[139]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"VAEDecode","widget_ue_connectable":{}}},{"id":58,"type":"TrimVideoLatent","pos":[724.3809814453125,691.72119140625],"size":[315,60],"flags":{"collapsed":true},"order":34,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":116},{"localized_name":"trim_amount","name":"trim_amount","type":"INT","widget":{"name":"trim_amount"},"link":115}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[117]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"TrimVideoLatent","widget_ue_connectable":{"trim_amount":true}},"widgets_values":[0]},{"id":6,"type":"CLIPTextEncode","pos":[150,180],"size":[422.84503173828125,164.31304931640625],"flags":{},"order":27,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":359},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":323}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[96]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":183,"type":"MarkdownNote","pos":[-936.2652587890625,-232.56549072265625],"size":[491.8392028808594,599.825927734375],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["[Tutorial](https://docs.comfy.org/tutorials/video/wan/vace) | [教程](https://docs.comfy.org/zh-CN/tutorials/video/wan/vace)\n\n[Causvid Lora extracted  by Kijai](https://www.reddit.com/r/StableDiffusion/comments/1knuafk/causvid_lora_massive_speedup_for_wan21_made_by/) Thanks to CausVid MIT\n\n##  14B Support 480P 720P\n\n**Diffusion Model**\n- [wan2.1_vace_14B_fp16.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/diffusion_models/wan2.1_vace_14B_fp16.safetensors)\n\n**LoRA**\n- [Wan21_CausVid_14B_T2V_lora_rank32.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan21_CausVid_14B_T2V_lora_rank32.safetensors)\n\nFYI: It takes about 40 minutes to run to completion at 81 frames per second in 720P resolution with the RTX 4090 when testing the workflow.  \nAfter using Wan21_CausVid_14B_T2V_lora_rank32.safetensors, it probably only takes about 4 minutes. \n\n\n## Other Models\n\n* You may already have these models if you use Wan workflow before.\n\n**VAE**\n- [wan_2.1_vae.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors?download=true)\n\n**Text encoders**   Chose one of following model\n- [umt5_xxl_fp16.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp16.safetensors?download=true)\n- [umt5_xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors?download=true)\n\n> You can choose between fp16 of fp8; I used fp16 to match what kijai's wrapper is compatible with.\n\nFile save location\n\n```\nComfyUI/\n├── models/\n│   ├── diffusion_models/\n│   │   ├-── wan2.1_vace_14B_fp16.safetensors\n│   │   └─── wan2.1_vace_1.3B_fp16.safetensors \n│   ├── text_encoders/\n│   │   └─── umt5_xxl_fp8_e4m3fn_scaled.safetensors # or fp16\n│   ├── loras/\n│   │   ├── Wan21_CausVid_14B_T2V_lora_rank32.safetensors\n│   │   └── Wan21_CausVid_bidirect2_T2V_1_3B_lora_rank32.safetensors\n│   └── vae/\n│       └──  wan_2.1_vae.safetensors\n```\n"],"color":"#432","bgcolor":"#653"},{"id":216,"type":"GetResolutionForVR","pos":[-1427.9805908203125,1907.5718994140625],"size":[162.41015625,86],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"base_image","name":"base_image","type":"IMAGE","link":326}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[328]},{"localized_name":"height","name":"height","type":"INT","links":[329,332]},{"localized_name":"count","name":"count","type":"INT","links":null},{"localized_name":"resolution","name":"resolution","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"ae8fdd156d2785dccacdec57715f30453c465815","Node name for S&R":"GetResolutionForVR","widget_ue_connectable":{}}},{"id":131,"type":"PrimitiveInt","pos":[-276.54022216796875,1187.921142578125],"size":[310,90],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":348}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[355,356]}],"title":"Length","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveInt","widget_ue_connectable":{}},"widgets_values":[81,"fixed"],"color":"#322","bgcolor":"#533"},{"id":223,"type":"MathExpression|pysssss","pos":[-1441.1146240234375,1650.0057373046875],"size":[400,200],"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":342},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[346,357]}],"title":"ToFloat","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["a"]},{"id":224,"type":"MathExpression|pysssss","pos":[-1421.2454833984375,1713.1312255859375],"size":[210,128],"flags":{"collapsed":true},"order":15,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":345},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[347,348]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"title":"x2","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["2 * a"]},{"id":222,"type":"PrimitiveInt","pos":[-1787.619140625,1643.6900634765625],"size":[270,82],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[342,345]}],"title":"FPS (Divisible by 4)","properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"PrimitiveInt","widget_ue_connectable":{}},"widgets_values":[8,"fixed"],"color":"#232","bgcolor":"#353"},{"id":187,"type":"Florence2ModelLoader","pos":[-242.16433715820312,-16.63222312927246],"size":[288.740234375,130],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[269]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2ModelLoader","widget_ue_connectable":{}},"widgets_values":["Florence-2-base","fp16","sdpa",false],"color":"#322","bgcolor":"#533"},{"id":48,"type":"ModelSamplingSD3","pos":[629.08984375,266.5728759765625],"size":[315,58],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":372},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[370]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"ModelSamplingSD3","widget_ue_connectable":{}},"widgets_values":[8.000000000000002]},{"id":207,"type":"LoraLoaderModelOnly","pos":[-250.4815216064453,-978.2144165039062],"size":[336.834716796875,82],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":371},{"localized_name":"lora_name","name":"lora_name","type":"COMBO","widget":{"name":"lora_name"},"link":null},{"localized_name":"strength_model","name":"strength_model","type":"FLOAT","widget":{"name":"strength_model"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[372]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"LoraLoaderModelOnly","widget_ue_connectable":{}},"widgets_values":["Wan21_CausVid_14B_T2V_lora_rank32.safetensors",0.7000000000000002],"color":"#322","bgcolor":"#533"},{"id":188,"type":"VHS_SelectImages","pos":[-1179.6439208984375,1172.94384765625],"size":[210,106],"flags":{"collapsed":false},"order":21,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":288},{"localized_name":"indexes","name":"indexes","type":"STRING","widget":{"name":"indexes"},"link":null},{"localized_name":"err_if_missing","name":"err_if_missing","type":"BOOLEAN","widget":{"name":"err_if_missing"},"link":null},{"localized_name":"err_if_empty","name":"err_if_empty","type":"BOOLEAN","widget":{"name":"err_if_empty"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[268]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.6.1","Node name for S&R":"VHS_SelectImages","widget_ue_connectable":{}},"widgets_values":{"indexes":"0","err_if_missing":true,"err_if_empty":true}},{"id":111,"type":"MaskToImage","pos":[334.5498046875,956.768798828125],"size":[240,26],"flags":{},"order":29,"mode":0,"inputs":[{"localized_name":"mask","name":"mask","type":"MASK","link":180}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[201]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"MaskToImage","widget_ue_connectable":{}}},{"id":129,"type":"RepeatImageBatch","pos":[334.8229064941406,829.481689453125],"size":[240,60],"flags":{},"order":30,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":201},{"localized_name":"amount","name":"amount","type":"INT","widget":{"name":"amount"},"link":356}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[202]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"RepeatImageBatch","widget_ue_connectable":{"amount":true}},"widgets_values":[17]},{"id":130,"type":"ImageToMask","pos":[333.6398620605469,708.1994018554688],"size":[240,60],"flags":{},"order":31,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":202},{"localized_name":"channel","name":"channel","type":"COMBO","widget":{"name":"channel"},"link":null}],"outputs":[{"localized_name":"MASK","name":"MASK","type":"MASK","links":[204]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"ImageToMask","widget_ue_connectable":{}},"widgets_values":["red"]},{"id":214,"type":"Float","pos":[-1790.7811279296875,1869.7247314453125],"size":[322.3472595214844,58],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"Number","name":"Number","type":"STRING","widget":{"name":"Number"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[330,331]}],"title":"Vertical Alignment (Float) 1 is top -1 is bottom","properties":{"cnr_id":"ComfyLiterals","ver":"bdddb08ca82d90d75d97b1d437a652e0284a32ac","Node name for S&R":"Float","widget_ue_connectable":{}},"widgets_values":["1"],"color":"#232","bgcolor":"#353"},{"id":217,"type":"MathExpression|pysssss","pos":[-1175.833251953125,2009.9171142578125],"size":[400,200],"flags":{"collapsed":true},"order":26,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":332},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":331},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[336]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"bottom padding","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["max(0, 720 - min(a,720)) * (( min(max(b,-1),1) + 1.0) / 2.0)"]},{"id":213,"type":"MathExpression|pysssss","pos":[-1166.7010498046875,1948.7239990234375],"size":[400,200],"flags":{"collapsed":true},"order":25,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":329},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":330},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[337]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"top padding","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["max(0, 720 - min(a,720)) * (( 1.0 - min(max(b,-1),1)) / 2.0)"]},{"id":218,"type":"MathExpression|pysssss","pos":[-1170.6849365234375,1880.9151611328125],"size":[400,200],"flags":{"collapsed":true},"order":24,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":328},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[333,334]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"side padding","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["max(0, 1280 - min(a,1280)) / 2.0"]},{"id":110,"type":"ImagePadForOutpaint","pos":[-262.62481689453125,699.97216796875],"size":[250,174],"flags":{},"order":28,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":276},{"localized_name":"left","name":"left","type":"INT","widget":{"name":"left"},"link":333},{"localized_name":"top","name":"top","type":"INT","widget":{"name":"top"},"link":337},{"localized_name":"right","name":"right","type":"INT","widget":{"name":"right"},"link":334},{"localized_name":"bottom","name":"bottom","type":"INT","widget":{"name":"bottom"},"link":336},{"localized_name":"feathering","name":"feathering","type":"INT","widget":{"name":"feathering"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[207]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":[180]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"ImagePadForOutpaint","widget_ue_connectable":{}},"widgets_values":[0,0,0,200,16],"color":"#222","bgcolor":"#000"},{"id":197,"type":"VHS_LoadVideo","pos":[-1738.3292236328125,929.9050903320312],"size":[267.2816467285156,571.2816162109375],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"video","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"force_rate","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":346},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"frame_load_cap","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":347},{"localized_name":"skip_first_frames","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"select_every_nth","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[276,288,326]},{"localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":[324]},{"localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[]}],"title":"Input - Load Video","properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.6.1","Node name for S&R":"VHS_LoadVideo","widget_ue_connectable":{}},"widgets_values":{"video":"test_video_outpaint (2).mp4","force_rate":8,"custom_width":0,"custom_height":0,"frame_load_cap":16,"skip_first_frames":0,"select_every_nth":1,"format":"None","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"test_video_outpaint (2).mp4","type":"input","format":"video/mp4","force_rate":8,"custom_width":0,"custom_height":0,"frame_load_cap":16,"skip_first_frames":0,"select_every_nth":1}}},"color":"#332922","bgcolor":"#593930"},{"id":69,"type":"SaveVideo","pos":[1370,180],"size":[780.23095703125,712.5714111328125],"flags":{},"order":37,"mode":0,"inputs":[{"localized_name":"video","name":"video","type":"VIDEO","link":129},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"codec","name":"codec","type":"COMBO","widget":{"name":"codec"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"SaveVideo","widget_ue_connectable":{}},"widgets_values":["vr/outpaint/intermediate/result","mp4","h264"]},{"id":189,"type":"Florence2Run","pos":[-285.4480285644531,227.2245330810547],"size":[400,364],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":268},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":269},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[323]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{}},"widgets_values":["","detailed_caption",false,false,1024,3,false,"",510729798263362,"randomize"]},{"id":3,"type":"KSampler","pos":[973.7817993164062,57.70740509033203],"size":[315,474],"flags":{},"order":33,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":370},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":98},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":99},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":160},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[116]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"KSampler","widget_ue_connectable":{}},"widgets_values":[176689519196660,"fixed",4,1,"ddpm","ddim_uniform",1],"color":"#322","bgcolor":"#533"},{"id":49,"type":"WanVaceToVideo","pos":[630.4814453125,384.29840087890625],"size":[315,254],"flags":{},"order":32,"mode":0,"inputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":96},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":97},{"localized_name":"vae","name":"vae","type":"VAE","link":260},{"localized_name":"control_video","name":"control_video","shape":7,"type":"IMAGE","link":207},{"localized_name":"control_masks","name":"control_masks","shape":7,"type":"MASK","link":204},{"localized_name":"reference_image","name":"reference_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":215},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":217},{"localized_name":"length","name":"length","type":"INT","widget":{"name":"length"},"link":355},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"strength","name":"strength","type":"FLOAT","widget":{"name":"strength"},"link":null}],"outputs":[{"localized_name":"positive","name":"positive","type":"CONDITIONING","links":[98]},{"localized_name":"negative","name":"negative","type":"CONDITIONING","links":[99]},{"localized_name":"latent","name":"latent","type":"LATENT","links":[160]},{"localized_name":"trim_latent","name":"trim_latent","type":"INT","links":[115]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"WanVaceToVideo","widget_ue_connectable":{"width":true,"height":true,"length":true}},"widgets_values":[720,720,45,1,1]},{"id":185,"type":"Power Lora Loader (rgthree)","pos":[-277.8893127441406,-706.5054321289062],"size":[367.499267578125,334],"flags":{},"order":13,"mode":0,"inputs":[{"dir":3,"name":"model","type":"MODEL","link":320},{"dir":3,"name":"clip","type":"CLIP","link":321}],"outputs":[{"dir":4,"name":"MODEL","shape":3,"type":"MODEL","links":[371]},{"dir":4,"name":"CLIP","shape":3,"type":"CLIP","links":[359,360]}],"properties":{"cnr_id":"rgthree-comfy","ver":"5dc53323e07a021038af9f2a4a06ebc071f7218c","Show Strengths":"Single Strength","widget_ue_connectable":{}},"widgets_values":[null,{"type":"PowerLoraLoaderHeaderWidget"},{"on":true,"lora":"incoming\\new_tentacle_core-ILL_by_VisionaryAI.safetensors","strength":0.7,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},null,""],"color":"#322","bgcolor":"#533"}],"links":[[96,6,0,49,0,"CONDITIONING"],[97,7,0,49,1,"CONDITIONING"],[98,49,0,3,1,"CONDITIONING"],[99,49,1,3,2,"CONDITIONING"],[115,49,3,58,1,"INT"],[116,3,0,58,0,"LATENT"],[117,58,0,8,0,"LATENT"],[129,68,0,69,0,"VIDEO"],[139,8,0,68,0,"IMAGE"],[160,49,2,3,3,"LATENT"],[180,110,1,111,0,"MASK"],[201,111,0,129,0,"IMAGE"],[202,129,0,130,0,"IMAGE"],[204,130,0,49,4,"MASK"],[207,110,0,49,3,"IMAGE"],[215,137,0,49,6,"INT"],[217,139,0,49,7,"INT"],[260,152,0,49,2,"VAE"],[261,152,0,8,1,"VAE"],[268,188,0,189,0,"IMAGE"],[269,187,0,189,1,"FL2MODEL"],[276,197,0,110,0,"IMAGE"],[288,197,0,188,0,"IMAGE"],[320,151,0,185,0,"MODEL"],[321,161,0,185,1,"CLIP"],[323,189,2,6,1,"STRING"],[324,197,2,68,1,"AUDIO"],[326,197,0,216,0,"IMAGE"],[328,216,0,218,0,"INT,FLOAT,IMAGE,LATENT"],[329,216,1,213,0,"INT,FLOAT,IMAGE,LATENT"],[330,214,0,213,1,"INT,FLOAT,IMAGE,LATENT"],[331,214,0,217,1,"INT,FLOAT,IMAGE,LATENT"],[332,216,1,217,0,"INT,FLOAT,IMAGE,LATENT"],[333,218,0,110,1,"INT"],[334,218,0,110,3,"INT"],[336,217,0,110,4,"INT"],[337,213,0,110,2,"INT"],[342,222,0,223,0,"INT,FLOAT,IMAGE,LATENT"],[345,222,0,224,0,"INT,FLOAT,IMAGE,LATENT"],[346,223,1,197,3,"FLOAT"],[347,224,0,197,6,"INT"],[348,224,0,131,0,"INT"],[355,131,0,49,8,"INT"],[356,131,0,129,1,"INT"],[357,223,1,68,2,"FLOAT"],[359,185,1,6,0,"CLIP"],[360,185,1,7,0,"CLIP"],[370,48,0,3,0,"MODEL"],[371,185,0,207,0,"MODEL"],[372,207,0,48,0,"MODEL"]],"groups":[{"id":2,"title":"Prompt","bounding":[140,-30,450,620],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"Sampling & Decoding","bounding":[610,-30,707.888427734375,827.0000610351562],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"Save Video(Mp4)","bounding":[1350,-30,1016.2864990234375,1061.1494140625],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"Pad Video for Outpainting","bounding":[-290,610,580,410],"color":"#444","font_size":24,"flags":{}},{"id":9,"title":"Length - 1 should be divisible by 4","bounding":[-290,1040,370,330],"color":"#3f789e","font_size":24,"flags":{}},{"id":10,"title":"Repeat Mask Batch","bounding":[310,610,280,410],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"Video size - Must be divisble by 16","bounding":[90,1040,500,330],"color":"#3f789e","font_size":24,"flags":{}},{"id":21,"title":"Load models here","bounding":[-292.19061279296875,-1219.505859375,419.6472473144531,1343.195556640625],"color":"#3f789e","font_size":24,"flags":{}},{"id":22,"title":"14B","bounding":[-272.19049072265625,-1179.5057373046875,384.59356689453125,314.63153076171875],"color":"#3f789e","font_size":24,"flags":{}},{"id":24,"title":"Load Video for Outpainting","bounding":[-1787.55419921875,845.1298217773438,862.0185546875,681.0128784179688],"color":"#b06634","font_size":24,"flags":{}},{"id":25,"title":"Auto-Caption","bounding":[-291.68792724609375,147.60816955566406,420,447.6000061035156],"color":"#3f789e","font_size":24,"flags":{}},{"id":27,"title":"FPS Parameter (higher values reduce guidance","bounding":[-1797.619140625,1564.22412109375,520.2587890625,201.1949462890625],"color":"#b06634","font_size":24,"flags":{}},{"id":28,"title":"Padding","bounding":[-1800.7811279296875,1795.434814453125,854.4412841796875,329.7907409667969],"color":"#b06634","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.4420993610651707,"offset":[507.9342521187094,1070.779551042418]},"frontendVersion":"1.21.0","node_versions":{"comfy-core":"0.3.34"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[],"links_added_by_ue":[]},"version":0.4}