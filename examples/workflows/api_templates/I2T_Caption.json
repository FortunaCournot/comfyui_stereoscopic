{"id":"14a6d1d4-8906-4b71-a4b3-a7accafb2ae3","revision":0,"last_node_id":26,"last_link_id":32,"nodes":[{"id":8,"type":"DownloadAndLoadFlorence2Model","pos":[-704.6329345703125,-1526.319091796875],"size":[318.6021423339844,130],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[12,19,26]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"DownloadAndLoadFlorence2Model","widget_ue_connectable":{}},"widgets_values":["microsoft/Florence-2-base","fp16","sdpa",true]},{"id":12,"type":"LoadImage","pos":[-660.8142700195312,-1963.8441162109375],"size":[270,314],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[13,16,25]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["91200655.png","image"]},{"id":2,"type":"Florence2Run","pos":[-260.0575866699219,-2119.504638671875],"size":[400,364],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":13},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":12},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[27]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{}},"widgets_values":["","more_detailed_caption",false,false,4096,3,false,"",441010814110607,"randomize"]},{"id":24,"type":"StripXML","pos":[313.5143127441406,-2184.09033203125],"size":[270,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"formatted","name":"formatted","type":"STRING","widget":{"name":"formatted"},"link":27}],"outputs":[{"localized_name":"raw","name":"raw","type":"STRING","links":[28]}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"9e14edf65bf2f22c361f9bb08d8005339d1603d1","widget_ue_connectable":{},"Node name for S&R":"StripXML"},"widgets_values":[""]},{"id":22,"type":"Florence2Run","pos":[-251.49459838867188,-1700.9788818359375],"size":[400,364],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":25},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":26},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[29]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{}},"widgets_values":["","caption",false,false,1024,3,false,"",757524996186607,"randomize"]},{"id":25,"type":"StripXML","pos":[318.47760009765625,-1769.6402587890625],"size":[270,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"formatted","name":"formatted","type":"STRING","widget":{"name":"formatted"},"link":29}],"outputs":[{"localized_name":"raw","name":"raw","type":"STRING","links":[30]}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"9e14edf65bf2f22c361f9bb08d8005339d1603d1","widget_ue_connectable":{},"Node name for S&R":"StripXML"},"widgets_values":[""]},{"id":15,"type":"Florence2Run","pos":[-252.32186889648438,-1278.2554931640625],"size":[400,364],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":16},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":19},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[31]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{}},"widgets_values":["","ocr",false,false,512,3,false,"",851977108039789,"randomize"]},{"id":26,"type":"StripXML","pos":[319.30474853515625,-1345.262451171875],"size":[270,58],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"formatted","name":"formatted","type":"STRING","widget":{"name":"formatted"},"link":31}],"outputs":[{"localized_name":"raw","name":"raw","type":"STRING","links":[32]}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"9e14edf65bf2f22c361f9bb08d8005339d1603d1","widget_ue_connectable":{},"Node name for S&R":"StripXML"},"widgets_values":[""]},{"id":20,"type":"SaveText|pysssss","pos":[315.1684875488281,-2075.721435546875],"size":[270,130],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":28},{"localized_name":"root_dir","name":"root_dir","type":"COMBO","widget":{"name":"root_dir"},"link":null},{"localized_name":"file","name":"file","type":"STRING","widget":{"name":"file"},"link":null},{"localized_name":"append","name":"append","type":"COMBO","widget":{"name":"append"},"link":null},{"localized_name":"insert","name":"insert","type":"BOOLEAN","widget":{"name":"insert"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":null}],"title":"Save Caption","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"SaveText|pysssss","widget_ue_connectable":{}},"widgets_values":["output","vr/caption/intermediate/temp_caption_long.txt","overwrite",true]},{"id":23,"type":"SaveText|pysssss","pos":[320.1322021484375,-1655.480224609375],"size":[270,130],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":30},{"localized_name":"root_dir","name":"root_dir","type":"COMBO","widget":{"name":"root_dir"},"link":null},{"localized_name":"file","name":"file","type":"STRING","widget":{"name":"file"},"link":null},{"localized_name":"append","name":"append","type":"COMBO","widget":{"name":"append"},"link":null},{"localized_name":"insert","name":"insert","type":"BOOLEAN","widget":{"name":"insert"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":null}],"title":"Save Caption","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"SaveText|pysssss","widget_ue_connectable":{}},"widgets_values":["output","vr/caption/intermediate/temp_caption_short.txt","overwrite",true]},{"id":21,"type":"SaveText|pysssss","pos":[320.13214111328125,-1237.720703125],"size":[270,130],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":32},{"localized_name":"root_dir","name":"root_dir","type":"COMBO","widget":{"name":"root_dir"},"link":null},{"localized_name":"file","name":"file","type":"STRING","widget":{"name":"file"},"link":null},{"localized_name":"append","name":"append","type":"COMBO","widget":{"name":"append"},"link":null},{"localized_name":"insert","name":"insert","type":"BOOLEAN","widget":{"name":"insert"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":null}],"title":"Save Caption","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","Node name for S&R":"SaveText|pysssss","widget_ue_connectable":{}},"widgets_values":["output","vr/caption/intermediate/temp_ocr.txt","overwrite",true]}],"links":[[12,8,0,2,1,"FL2MODEL"],[13,12,0,2,0,"IMAGE"],[16,12,0,15,0,"IMAGE"],[19,8,0,15,1,"FL2MODEL"],[25,12,0,22,0,"IMAGE"],[26,8,0,22,1,"FL2MODEL"],[27,2,2,24,0,"STRING"],[28,24,0,20,0,"STRING"],[29,22,2,25,0,"STRING"],[30,25,0,23,0,"STRING"],[31,15,2,26,0,"STRING"],[32,26,0,21,0,"STRING"]],"groups":[],"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.8954302432552976,"offset":[767.372645095768,2242.043875923122]}},"version":0.4}