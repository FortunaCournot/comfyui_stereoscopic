{"id":"62315611-2ae8-4732-9bf7-df3a21230818","revision":0,"last_node_id":48,"last_link_id":123,"nodes":[{"id":8,"type":"VAEDecode","pos":[1422,387],"size":[210,46],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":123},{"localized_name":"vae","name":"vae","type":"VAE","link":83}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[22]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"VAEDecode","widget_ue_connectable":{}}},{"id":9,"type":"SaveImage","pos":[1671,384],"size":[360.54998779296875,441.5299987792969],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":22},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"SaveImage","widget_ue_connectable":{}},"widgets_values":["ComfyUI"]},{"id":34,"type":"MarkdownNote","pos":[-473.9584655761719,406.9381408691406],"size":[336,128],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["### Learn more about this workflow\n\n> [Outpaint - ComfyUI_examples](https://comfyanonymous.github.io/ComfyUI_examples/inpaint/#outpainting) — Overview\n> \n> [Outpainting - docs.comfy.org](https://docs.comfy.org/tutorials/basic/outpaint) — Explanation of concepts and step-by-step tutorial"],"color":"#432","bgcolor":"#653"},{"id":7,"type":"CLIPTextEncode","pos":[434,371],"size":[425.2799987792969,180.61000061035156],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":105},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[6]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":["watermark, text"],"color":"#322","bgcolor":"#533"},{"id":26,"type":"VAEEncodeForInpaint","pos":[617,720],"size":[226.8000030517578,98],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":87},{"localized_name":"vae","name":"vae","type":"VAE","link":84},{"localized_name":"mask","name":"mask","type":"MASK","link":86},{"localized_name":"grow_mask_by","name":"grow_mask_by","type":"INT","widget":{"name":"grow_mask_by"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[72]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"VAEEncodeForInpaint","widget_ue_connectable":{}},"widgets_values":[64]},{"id":39,"type":"Florence2ModelLoader","pos":[-104.98451232910156,-338.6805725097656],"size":[288.740234375,130],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"lora","name":"lora","shape":7,"type":"PEFTLORA","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"localized_name":"convert_to_safetensors","name":"convert_to_safetensors","shape":7,"type":"BOOLEAN","widget":{"name":"convert_to_safetensors"},"link":null}],"outputs":[{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","links":[108]}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2ModelLoader","widget_ue_connectable":{}},"widgets_values":["Florence-2-base","fp16","sdpa",false]},{"id":6,"type":"CLIPTextEncode","pos":[436.210693359375,159.68423461914062],"size":[422.81243896484375,161.2169189453125],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":104},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":110}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[4]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"CLIPTextEncode","widget_ue_connectable":{}},"widgets_values":[""]},{"id":41,"type":"Florence2Run","pos":[279.7890319824219,-363.3563537597656],"size":[400,364],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":111},{"localized_name":"florence2_model","name":"florence2_model","type":"FL2MODEL","link":108},{"localized_name":"text_input","name":"text_input","type":"STRING","widget":{"name":"text_input"},"link":null},{"localized_name":"task","name":"task","type":"COMBO","widget":{"name":"task"},"link":null},{"localized_name":"fill_mask","name":"fill_mask","type":"BOOLEAN","widget":{"name":"fill_mask"},"link":null},{"localized_name":"keep_model_loaded","name":"keep_model_loaded","shape":7,"type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","shape":7,"type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"num_beams","name":"num_beams","shape":7,"type":"INT","widget":{"name":"num_beams"},"link":null},{"localized_name":"do_sample","name":"do_sample","shape":7,"type":"BOOLEAN","widget":{"name":"do_sample"},"link":null},{"localized_name":"output_mask_select","name":"output_mask_select","shape":7,"type":"STRING","widget":{"name":"output_mask_select"},"link":null},{"localized_name":"seed","name":"seed","shape":7,"type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"caption","name":"caption","type":"STRING","links":[110]},{"localized_name":"data","name":"data","type":"JSON","links":null}],"properties":{"cnr_id":"comfyui-florence2","ver":"1.0.5","Node name for S&R":"Florence2Run","widget_ue_connectable":{}},"widgets_values":["","more_detailed_caption",false,false,1024,3,false,"",483302499167365,"fixed"]},{"id":46,"type":"Float","pos":[-682.6760864257812,1210.1083984375],"size":[322.3472595214844,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"Number","name":"Number","type":"STRING","widget":{"name":"Number"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[114,116]}],"title":"Vertical Alignment (Float) 1 is top -1 is bottom","properties":{"cnr_id":"ComfyLiterals","ver":"bdddb08ca82d90d75d97b1d437a652e0284a32ac","Node name for S&R":"Float","widget_ue_connectable":{}},"widgets_values":["1.0"]},{"id":43,"type":"GetResolutionForVR","pos":[-325.38128662109375,1209.41845703125],"size":[162.41015625,86],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"base_image","name":"base_image","type":"IMAGE","link":122}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[112]},{"localized_name":"height","name":"height","type":"INT","links":[113,115]},{"localized_name":"count","name":"count","type":"INT","links":null},{"localized_name":"resolution","name":"resolution","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"ae8fdd156d2785dccacdec57715f30453c465815","Node name for S&R":"GetResolutionForVR","widget_ue_connectable":{}}},{"id":30,"type":"ImagePadForOutpaint","pos":[252.03269958496094,726.62841796875],"size":[315,174],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":85},{"localized_name":"left","name":"left","type":"INT","widget":{"name":"left"},"link":117},{"localized_name":"top","name":"top","type":"INT","widget":{"name":"top"},"link":119},{"localized_name":"right","name":"right","type":"INT","widget":{"name":"right"},"link":118},{"localized_name":"bottom","name":"bottom","type":"INT","widget":{"name":"bottom"},"link":120},{"localized_name":"feathering","name":"feathering","type":"INT","widget":{"name":"feathering"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[87]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":[86]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"ImagePadForOutpaint","widget_ue_connectable":{}},"widgets_values":[0,0,0,224,0]},{"id":3,"type":"KSampler","pos":[940,180],"size":[315,474],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":92},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":4},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":6},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":72},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[123]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"KSampler","widget_ue_connectable":{}},"widgets_values":[745193682211719,"fixed",20,10,"euler_ancestral","karras",0.9000000000000001]},{"id":20,"type":"LoadImage","pos":[-115.77914428710938,726.8905029296875],"size":[344,346],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[85,111,122]},{"localized_name":"MASK","name":"MASK","type":"MASK","slot_index":1,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["test_image.png","image"]},{"id":35,"type":"Power Lora Loader (rgthree)","pos":[39.09554672241211,260.8678283691406],"size":[340.20001220703125,334],"flags":{},"order":7,"mode":0,"inputs":[{"dir":3,"name":"model","type":"MODEL","link":90},{"dir":3,"name":"clip","type":"CLIP","link":91}],"outputs":[{"dir":4,"name":"MODEL","shape":3,"type":"MODEL","links":[92]},{"dir":4,"name":"CLIP","shape":3,"type":"CLIP","links":[104,105]}],"properties":{"cnr_id":"rgthree-comfy","ver":"5dc53323e07a021038af9f2a4a06ebc071f7218c","Show Strengths":"Single Strength","widget_ue_connectable":{}},"widgets_values":[null,{"type":"PowerLoraLoaderHeaderWidget"},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},{"on":false,"lora":"None","strength":0,"strengthTwo":null},null,""],"color":"#2a363b","bgcolor":"#3f5159"},{"id":29,"type":"CheckpointLoaderSimple","pos":[49.01430892944336,95.60275268554688],"size":[315,98],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[90]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[91]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[83,84]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.18","Node name for S&R":"CheckpointLoaderSimple","models":[{"name":"512-inpainting-ema.safetensors","url":"https://huggingface.co/stabilityai/stable-diffusion-2-inpainting/resolve/main/512-inpainting-ema.safetensors?download=true","directory":"checkpoints"}],"widget_ue_connectable":{}},"widgets_values":["512-inpainting-ema.safetensors"]},{"id":44,"type":"MathExpression|pysssss","pos":[-69.21951293945312,1211.474853515625],"size":[400,200],"flags":{"collapsed":true},"order":8,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":112},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[117,118]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"side padding","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["max(0, 1280 - min(a,1280)) / 2.0"]},{"id":47,"type":"MathExpression|pysssss","pos":[-71.80437469482422,1259.4141845703125],"size":[400,200],"flags":{"collapsed":true},"order":10,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":115},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":116},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[119]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"top padding","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["max(0, 720 - min(a,720)) * (( 1.0 - min(max(b,-1),1) ) / 2.0)"]},{"id":45,"type":"MathExpression|pysssss","pos":[-83.55944061279297,1330.6094970703125],"size":[400,200],"flags":{"collapsed":true},"order":9,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":113},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":114},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[120]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"bottom padding","properties":{"cnr_id":"comfyui-custom-scripts","ver":"1.2.5","widget_ue_connectable":{}},"widgets_values":["max(0, 720 - min(a,720)) * ((min(max(b,-1),1) + 1.0 ) / 2.0)"]}],"links":[[4,6,0,3,1,"CONDITIONING"],[6,7,0,3,2,"CONDITIONING"],[22,8,0,9,0,"IMAGE"],[72,26,0,3,3,"LATENT"],[83,29,2,8,1,"VAE"],[84,29,2,26,1,"VAE"],[85,20,0,30,0,"IMAGE"],[86,30,1,26,2,"MASK"],[87,30,0,26,0,"IMAGE"],[90,29,0,35,0,"MODEL"],[91,29,1,35,1,"CLIP"],[92,35,0,3,0,"MODEL"],[104,35,1,6,0,"CLIP"],[105,35,1,7,0,"CLIP"],[108,39,0,41,1,"FL2MODEL"],[110,41,2,6,1,"STRING"],[111,20,0,41,0,"IMAGE"],[112,43,0,44,0,"INT,FLOAT,IMAGE,LATENT"],[113,43,1,45,0,"INT,FLOAT,IMAGE,LATENT"],[114,46,0,45,1,"INT,FLOAT,IMAGE,LATENT"],[115,43,1,47,0,"INT,FLOAT,IMAGE,LATENT"],[116,46,0,47,1,"INT,FLOAT,IMAGE,LATENT"],[117,44,0,30,1,"INT"],[118,44,0,30,3,"INT"],[119,47,0,30,2,"INT"],[120,45,0,30,4,"INT"],[122,20,0,43,0,"IMAGE"],[123,3,0,8,0,"LATENT"]],"groups":[{"id":1,"title":"Load image and pad for outpainting","bounding":[-120,600,1038,509],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":0.9675800123352398,"offset":[528.7711606675305,-584.9939875489295]}},"version":0.4}