{"id":"6f1b1bef-79cb-4b71-b9c9-916f71c065b3","revision":0,"last_node_id":183,"last_link_id":308,"nodes":[{"id":121,"type":"strftime","pos":[741.553466796875,-173.65170288085938],"size":[270,78],"flags":{"collapsed":true},"order":24,"mode":0,"inputs":[{"localized_name":"anything","name":"anything","type":"*","link":198},{"localized_name":"format","name":"format","type":"STRING","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"anything","name":"anything","type":"*","links":[199]},{"localized_name":"string","name":"string","type":"STRING","links":[204]}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"a804a66063a4ab67aca49c88fcd38a3746de5f1e","Node name for S&R":"strftime"},"widgets_values":["%y%m%d%H%M%S"],"color":"#223","bgcolor":"#335"},{"id":128,"type":"MarkdownNote","pos":[-1777.3394775390625,-1047.9949951171875],"size":[333.6561279296875,273.8980712890625],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"Directory structure","properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.1","input_ue_unconnectable":{}}},"widgets_values":["The workflow saves videos here:\n\n```\nComfyUI/\nâ”œâ”€â”€â”€ðŸ“‚ output/\nâ”‚   â”œâ”€â”€â”€ðŸ“‚ vr/\nâ”‚   â”‚   â””â”€â”€â”€ðŸ“‚ tasks/\nâ”‚   â”‚       â””â”€â”€â”€ðŸ“‚ forwarder/\nâ”‚   â”‚           â””â”€â”€â”€ Moves files here \n```\n\nThen the deamon service forwards them (with 60s delay) to a place where you can rate them with the VR we are app:\n\n```\nComfyUI/\nâ”œâ”€â”€â”€ðŸ“‚ input/\nâ”‚   â”œâ”€â”€â”€ðŸ“‚ vr/\nâ”‚   â”‚   â””â”€â”€â”€ðŸ“‚ check/\nâ”‚   â”‚       â””â”€â”€â”€ðŸ“‚ rate/\n```\n"],"color":"#222","bgcolor":"#000"},{"id":131,"type":"MathExpression|pysssss","pos":[-1075.986572265625,-538.5885620117188],"size":[210,128],"flags":{"collapsed":true},"order":18,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":224},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":225},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[206]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"title":"Resolution Check","properties":{},"widgets_values":["sqrt(a * b)"],"color":"#223","bgcolor":"#335"},{"id":136,"type":"PrimitiveFloat","pos":[-1343.8885498046875,-946.9974365234375],"size":[210,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[]}],"title":"LoRA Strength","properties":{"cnr_id":"comfy-core","ver":"0.3.62","Node name for S&R":"PrimitiveFloat"},"widgets_values":[1],"color":"#223","bgcolor":"#335"},{"id":130,"type":"PrimitiveString","pos":[-1769.7379150390625,-729.482421875],"size":[338.7657165527344,58],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[230]}],"title":"Path to Pipeline","properties":{"cnr_id":"comfy-core","ver":"0.3.62","Node name for S&R":"PrimitiveString"},"widgets_values":["vr/tasks/forwarder"],"color":"#222","bgcolor":"#000"},{"id":138,"type":"PrimitiveFloat","pos":[-1334.8653564453125,-470.14013671875],"size":[210,58],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"FLOAT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":[223]}],"title":"Scale Factor Base 1024","properties":{"cnr_id":"comfy-core","ver":"0.3.62","Node name for S&R":"PrimitiveFloat"},"widgets_values":[1],"color":"#223","bgcolor":"#335"},{"id":139,"type":"MarkdownNote","pos":[-1333.02978515625,-598.3624877929688],"size":[210,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Notice","properties":{},"widgets_values":["# Check Factor"],"color":"#ff1414","bgcolor":"#ff0000"},{"id":108,"type":"SaveImage","pos":[985.2575073242188,-692.3809204101562],"size":[647.6743774414062,936.291259765625],"flags":{},"order":26,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":199},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":203}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.50","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":129,"type":"PreviewAny","pos":[-1106.874755859375,-489.0313415527344],"size":[210,88],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":206}],"outputs":[],"title":"Output Resolution","properties":{"cnr_id":"comfy-core","ver":"0.3.62","Node name for S&R":"PreviewAny"},"widgets_values":[],"color":"#223","bgcolor":"#335"},{"id":150,"type":"MarkdownNote","pos":[-1368.247314453125,-47.97106170654297],"size":[227.0615234375,111.6966552734375],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Notice","properties":{},"widgets_values":["# Scales output by factor, keeps aspect\nCheck Output Resolution above"],"color":"#ff1414","bgcolor":"#ff0000"},{"id":127,"type":"MarkdownNote","pos":[-1821.9805908203125,-1264.219482421875],"size":[974.682861328125,93.56988525390625],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Note","properties":{},"widgets_values":["# Sample workflow with forward to rating. Just copy these parts in your T2I, I2V or T2V workflows\n## Some other feature is scale normalization and aspect calculations for a T2I workflow"],"color":"#222","bgcolor":"#000"},{"id":135,"type":"Primitive integer [Crystools]","pos":[-1119.743896484375,-954.9131469726562],"size":[210,58],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"int","name":"int","type":"INT","widget":{"name":"int"},"link":null}],"outputs":[{"localized_name":"int","name":"int","type":"INT","links":[217]}],"title":"Steps","properties":{"Node name for S&R":"Primitive integer [Crystools]"},"widgets_values":[25],"color":"#223","bgcolor":"#335"},{"id":146,"type":"MathExpression|pysssss","pos":[617.092529296875,-914.1038208007812],"size":[210,128],"flags":{"collapsed":true},"order":14,"mode":0,"inputs":[{"localized_name":"a","name":"a","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":217},{"localized_name":"b","name":"b","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"c","name":"c","shape":7,"type":"INT,FLOAT,IMAGE,LATENT","link":null},{"localized_name":"expression","name":"expression","type":"INT,FLOAT,IMAGE,LATENT","widget":{"name":"expression"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[]},{"localized_name":"FLOAT","name":"FLOAT","type":"FLOAT","links":null}],"title":"BASE Steps","properties":{},"widgets_values":["floor( (a+1) * 0.8 )"]},{"id":149,"type":"MarkdownNote","pos":[-1345.989501953125,-859.6741333007812],"size":[434.1206359863281,211.35598754882812],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"title":"Notice","properties":{},"widgets_values":["# Switch the base model "],"color":"#ff1414","bgcolor":"#ff0000"},{"id":125,"type":"PrimitiveString","pos":[-1139.8187255859375,173.8876495361328],"size":[270,58],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[205]}],"title":"Filename Prefix","properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"PrimitiveString"},"widgets_values":["sdxlimage"],"color":"#223","bgcolor":"#335"},{"id":170,"type":"PrimitiveStringMultiline","pos":[-416.90350341796875,-91.82180786132812],"size":[639.7066650390625,146.0946502685547],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[258]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Vibrant colors, overexposure, static, blurred details, subtitles, style, artwork, painting, still image, overall graying, worst quality, low quality, JPEG compression residue, ugly, mutilated, extra fingers, poorly drawn hands, poorly drawn faces, deformed, disfigured, malformed limbs, fused fingers, still image, cluttered background, three legs, crowded background, walking backwards"],"color":"#322","bgcolor":"#533"},{"id":169,"type":"PrimitiveStringMultiline","pos":[-414.1603088378906,-442.426513671875],"size":[649.1913452148438,292.1053161621094],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[256]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["Upper bodyshot of a teddy bear wearing a  white ancient roman consul toga with red ornaments looking towards the cam, standing is proud, holding one hand up to greet. The toga is very simple, and the ornaments very brief.\n\n.break. scene in interior of an very old ancient roman castle. white marble floors, white  marble walls, white marble pillars, statues with golden ornaments. very rich and detailled interior. ancient torchs at the walls."],"color":"#232","bgcolor":"#353"},{"id":89,"type":"CLIPTextEncode","pos":[-410.5616149902344,-647.1318969726562],"size":[263.2095642089844,89.72339630126953],"flags":{"collapsed":true},"order":16,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":264},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":256}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[299]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#232","bgcolor":"#353"},{"id":72,"type":"CLIPTextEncode","pos":[-398.9195251464844,-569.5852661132812],"size":[269.4439392089844,88],"flags":{"collapsed":true},"order":17,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":284},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":258}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[300]}],"title":"CLIP Text Encode (Negative Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"CLIPTextEncode"},"widgets_values":[""],"color":"#322","bgcolor":"#533"},{"id":118,"type":"CalculateDimensions","pos":[-1133.861328125,-51.42781448364258],"size":[270,174],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"baseresolution","name":"baseresolution","type":"INT","widget":{"name":"baseresolution"},"link":null},{"localized_name":"factor","name":"factor","type":"FLOAT","widget":{"name":"factor"},"link":223},{"localized_name":"roundexponent","name":"roundexponent","type":"INT","widget":{"name":"roundexponent"},"link":null}],"outputs":[{"localized_name":"width","name":"width","type":"INT","links":[224,302]},{"localized_name":"height","name":"height","type":"INT","links":[225,303]}],"title":"Calculate Dimensions by Aspect","properties":{"cnr_id":"comfyui_stereoscopic","ver":"a804a66063a4ab67aca49c88fcd38a3746de5f1e","Node name for S&R":"CalculateDimensions"},"widgets_values":[640,640,1024,1,6],"color":"#223","bgcolor":"#335"},{"id":178,"type":"EmptySD3LatentImage","pos":[-802.1992797851562,-67.24723052978516],"size":[315,106],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":302},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":303},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[301]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"EmptySD3LatentImage"},"widgets_values":[1024,1024,1],"color":"#323","bgcolor":"#535"},{"id":183,"type":"KSampler","pos":[395.0740051269531,-640.48095703125],"size":[315,262],"flags":{},"order":22,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":298},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":299},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":300},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":308},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[306]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"KSampler"},"widgets_values":[779121325215023,"randomize",20,4.01,"euler","sgm_uniform",1]},{"id":154,"type":"CheckpointLoaderSimple","pos":[-822.602294921875,-655.4185791015625],"size":[340.8246154785156,98],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[298]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[264,284]},{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":2,"links":[307]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.33","Node name for S&R":"CheckpointLoaderSimple","models":[{"name":"sd_xl_base_1.0.safetensors","url":"https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors?download=true","directory":"checkpoints"}]},"widgets_values":["sd3.5_large_fp8_scaled.safetensors"],"color":"#323","bgcolor":"#535"},{"id":126,"type":"StringConcatenate","pos":[722.1342163085938,-290.4010925292969],"size":[210,166],"flags":{"collapsed":true},"order":25,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":202},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":204},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[203]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"StringConcatenate","widget_ue_connectable":{}},"widgets_values":["","","-"]},{"id":123,"type":"StringConcatenate","pos":[697.4509887695312,-73.8277816772461],"size":[210,166],"flags":{"collapsed":false},"order":15,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":230},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":205},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[202]}],"title":"Path to pipeline task","properties":{"cnr_id":"comfy-core","ver":"0.3.59","Node name for S&R":"StringConcatenate","widget_ue_connectable":{}},"widgets_values":["vr/tasks/forwarder","imagename","/"],"color":"#223","bgcolor":"#335"},{"id":87,"type":"VAEDecode","pos":[488.3149108886719,-202.57765197753906],"size":[210,46],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":306},{"localized_name":"vae","name":"vae","type":"VAE","link":307}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[198]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":117,"type":"VRwearePauseLatent","pos":[295.95135498046875,-61.60817337036133],"size":[154.8304443359375,26],"flags":{"collapsed":false},"order":21,"mode":0,"inputs":[{"localized_name":"latent","name":"latent","type":"LATENT","link":301}],"outputs":[{"localized_name":"latent","name":"latent","type":"LATENT","links":[308]}],"properties":{"cnr_id":"comfyui_stereoscopic","ver":"a804a66063a4ab67aca49c88fcd38a3746de5f1e","Node name for S&R":"VRwearePauseLatent"},"widgets_values":[],"color":"#223","bgcolor":"#335"}],"links":[[198,87,0,121,0,"*"],[199,121,0,108,0,"IMAGE"],[202,123,0,126,0,"STRING"],[203,126,0,108,1,"STRING"],[204,121,1,126,1,"STRING"],[205,125,0,123,1,"STRING"],[206,131,0,129,0,"*"],[217,135,0,146,0,"INT,FLOAT,IMAGE,LATENT"],[223,138,0,118,3,"FLOAT"],[224,118,0,131,0,"INT,FLOAT,IMAGE,LATENT"],[225,118,1,131,1,"INT,FLOAT,IMAGE,LATENT"],[230,130,0,123,0,"STRING"],[256,169,0,89,1,"STRING"],[258,170,0,72,1,"STRING"],[264,154,1,89,0,"CLIP"],[284,154,1,72,0,"CLIP"],[298,154,0,183,0,"MODEL"],[299,89,0,183,1,"CONDITIONING"],[300,72,0,183,2,"CONDITIONING"],[301,178,0,117,0,"LATENT"],[302,118,0,178,0,"INT"],[303,118,1,178,1,"INT"],[306,183,0,87,0,"LATENT"],[307,154,2,87,1,"VAE"],[308,117,0,183,3,"LATENT"]],"groups":[{"id":13,"title":"Wan2.2 T2V fp8_scaled +  4 steps LoRA","bounding":[-843.3209838867188,-775.4535522460938,2565.108642578125,1078.24609375],"color":"#3f789e","font_size":24,"flags":{}},{"id":6,"title":"Step3 Prompt","bounding":[-439.8801574707031,-523.9087524414062,691.7159423828125,592.5567626953125],"color":"#3f789e","font_size":24,"flags":{}},{"id":7,"title":"CLIPS","bounding":[-443.3208312988281,-735.4535522460938,679.099853515625,186.95716857910156],"color":"#3f789e","font_size":24,"flags":{}},{"id":11,"title":"Step 1 - Load models","bounding":[-833.3209838867188,-735.4535522460938,366.7470703125,563.5814208984375],"color":"#3f789e","font_size":24,"flags":{}},{"id":12,"title":"Step 2 - Image size","bounding":[-833.3209838867188,-155.4534454345703,370,230],"color":"#3f789e","font_size":24,"flags":{}},{"id":14,"title":"Forwarding Setup","bounding":[-1825.7025146484375,-1138.6082763671875,391.1401672363281,505.6422424316406],"color":"#ffffff","font_size":24,"flags":{}},{"id":15,"title":"Custom LoRAs (placeholder).","bounding":[-842.5966186523438,-1125.5338134765625,1352.1605224609375,327.12225341796875],"color":"#88A","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.5730855330117854,"offset":[1337.0932063881587,847.3415535570308]},"frontendVersion":"1.25.11","reroutes":[{"id":1,"pos":[567.2446899414062,-927.22705078125],"linkIds":[217]}],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"linkExtensions":[{"id":217,"parentId":1}]},"version":0.4}